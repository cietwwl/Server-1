syntax = "proto2";
option java_package = "com.rwproto";
option java_outer_classname = "GroupSecretProto";

package groupSecret;


enum RequestType{

	GET_USER_SECRETS = 1;//获取用户参与或创建的秘境
	FIND_MATCH_SECRET = 2;//查询匹配的秘境
	OPEN_SECRET = 3;//开启秘境
	GET_DEF_LOG = 4; //获取防守记录
	GET_DEF_REWARD = 5;//获取防守奖励
	GET_SECRET_REWARD = 6;//获取秘境奖励
	SET_DEF_ARMY = 7;//驻军
	FIGHT_START = 8;  //开支战斗
	FIGHT_END = 9;  //战斗结束

}

message GroupSecretDataJson{
	optional string groupSecretData = 1;
	repeated string groupSecretDefLogData = 2;
}

message OpenReqMsg{
	required int32 type =1;  //秘境类型
}
message GetDefLogReqMsg{
	required string secretId = 1;
	required string defLogId = 2;
}

message GetDefRewardMsg{
	required string secretId = 1;
	required string defLogId = 2;
}
message GetSecretRewardMsg{
	required string secretId = 1;
}

message SetDefArmyReqMsg{
	repeated string heroId =1;  //驻守的英雄id列表
}


message FightStartReqMsg{
	optional string defArmyUserId =1;  //驻守的用户的id
	optional string attackArmyInfoJson =2;  //进攻队伍的json串
}
message FightEndReqMsg{
	optional string defArmyUserId =1;  //驻守的用户的id
	optional string attackArmyInfoJson =2;  //进攻队伍的json串
	optional string defArmyInfoJson =3;  //驻守队伍的json串
}

message CommonReqMsg{

	required RequestType reqType = 1;//请求功能协议类型
	optional OpenReqMsg openReqMsg = 2; //开启秘境所需参数
	optional GetDefLogReqMsg getDefLogReqMsg = 4;  //获取防守记录
	optional GetDefRewardMsg getDefRewardMsg = 5;  //获取防守奖励的参数
	optional GetSecretRewardMsg getSecretRewardMsg = 6;  //获取秘境奖励的参数
	optional SetDefArmyReqMsg setDefArmyReqMsg = 7;  //驻军
	optional FightStartReqMsg fightStartReqMsg = 8;  //战斗开始
	optional FightEndReqMsg fightEndReqMsg = 9;  //战斗结束

}


message FindMatchSecretRspMsg{
	optional GroupSecretDataJson groupSecretData = 1;
}


message CommonRspMsg{

	required RequestType reqType = 1;//回应的功能协议类型
	required bool isSuccess = 2;//是否成功处理
	optional string tipMsg = 3;//提示消息，可以是成功，也可以是失败的提示消息
	optional FindMatchSecretRspMsg findMatchSecretRspMsg = 4; //FIND_MATCH_SECRET 返回

}