syntax = "proto2";
option java_package = "com.rwproto";
option java_outer_classname = "PeakArenaServiceProtos";
import "SkillService.proto";
import "SyncAttri.proto";

enum eArenaType {
	GET_DATA = 0;     //
	CHANGE_ENEMY = 1; // 
	CHANGE_HERO = 2;  //
	ARENA_RECORD = 3; //
	ENEMY_INFO = 4;   //
	CLEAR_TIME = 5;	  // TODO 重置CD时间
	ARENA_FIGHT_PREPARE = 6;//
	ARENA_FIGHT_START = 7;  //
	ARENA_FIGHT_FINISH = 8;//
	SYNC_RECORD = 9;//
	GET_PLACE = 10;//
	GET_SCORE = 11;//领取巅峰竞技场货币，TODO:需要修改为进入巅峰竞技场或者商店的时候自动领取
	SWITCH_OVER = 12;//更换玩家队伍顺序，TODO:需要修改为<TeamId, Order>这种方式才灵活
	BUY_CHALLENGE_COUNT = 13;// TODO 购买挑战次数
}

enum eArenaResultType {
	ARENA_SUCCESS = 1;//成功
	ARENA_FAIL = 2;//失败
}

message HeroData{
	required string heroId = 1;
	required string templeteId = 2;
	optional int32 level = 3;
	optional int32 starLevel = 4;
	optional int32 fighting = 5; // 要问下宇超，界面战力显示系指当前队伍？三队总和？主角自己？
	optional string qualityId = 6;
	optional int64 exp = 7; // 有用咩？
	repeated SkillService.TagSkillData skills = 8;  // 咩来嘎 ？？
	repeated SyncAttri.TagAttriData attrs = 9;// 咩来嘎 ？？
	optional int32 teamId = 10;
	optional string headImage = 11;//TODO
}

message TeamInfo{
	required int32 teamId = 1;
	repeated HeroData heros = 2;
	repeated string heroIds = 3;//关于heros入面有id，呢度仲要有heroids原来系因为布阵- -m                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
	optional int32 magicId = 4;
	optional int32 magicLevel = 5;
	required HeroData player = 6; // TODO 不如主角从heros摞出来？睇你点样方便
}

message ArenaData{
	required string userId = 1;
	optional int32 score = 2;
	optional int32 gainScore = 3; //积分
	optional int32 scoreLv = 4;
	optional int32 place = 5;// 当前排名
	optional int32 maxPlace = 6; // 历史最高排名
	optional int32 winningStreak = 7;  // 唔知系咩，旧代码无用过
	optional int32 winCount = 8;
	optional int32 challengeCount = 9;
	optional int32 cdTime = 10;
	optional int32 career = 11;
	optional string name = 12;
	optional int32 level = 13;
	optional string headImage = 14;
	optional string templeteId = 15;
	optional int32 fighting = 16;  // 感觉你发比我已经无用喇，最后可能都系自己计 我估系唔系直接cp左职业竞技场
	repeated SkillService.TagSkillData roleSkill = 17;
	repeated SyncAttri.TagAttriData roleAttr = 18;
	repeated TeamInfo teams = 19;
	optional int64 lastFightTime = 20;  //唔知系咩
	optional int32 gainCurrencyPerHour = 21;	//每小时能获得的巅峰币
	optional int32 maxChallengeCount = 22;   // TODO 最大战次数，会根据特权而修改
    optional string groupName = 23; //TODO 帮派名称
}

message ArenaInfo{
	required string userId =1;
	optional int32 score = 2;
	optional int32 scoreLv = 3;
	optional int32 place = 4;
	optional int32 winCount = 5;
	optional int32 level = 6;
	optional string name = 7;
	optional string headImage = 8;
	optional int32 fighting = 9;
}

message ArenaRecord{
	required string userId = 1;
	optional bool win = 2;
	optional int32 placeUp = 3;
	optional string name = 4;
	optional string headImage = 5;
	optional int32 level = 6;
	optional int64 time = 7;
	optional int32 challenge = 8;
}

message MsgArenaRequest{
    required eArenaType arenaType = 1;
	optional string userId = 2;
	repeated TeamInfo teams = 3;
	optional ArenaInfo enemy = 4;
	optional bool win = 5;
	repeated int32 reorder = 6;// TODO 重新排列玩家队伍：按照顺序列出1、2、3队伍的ID
}

message MsgArenaResponse{
	required eArenaType arenaType = 1;
	optional eArenaResultType arenaResultType = 2;
	optional ArenaData arenaData = 3;
	repeated ArenaInfo listInfo = 4;
	repeated ArenaRecord listRecord = 5;
	optional int32 place = 6;
	optional string resultTip = 7;//服务器返回给客户端的操作结果提示，不需要显示，主要用来打印日志帮助调试
}
